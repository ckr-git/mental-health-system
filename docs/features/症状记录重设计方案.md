# 症状记录页面重新设计方案

## 🎯 设计理念

**从"症状记录"到"情绪日记" - 一个温暖的心理健康伙伴**

### 核心原则
1. **正视情绪，不逃避** - 移除删除功能，改为"标记已度过"
2. **情感宣泄通道** - 提供多种表达和释放情绪的方式
3. **正向引导** - 通过可视化和鼓励语帮助患者看到进步
4. **情感共鸣** - 让患者能与过去的自己对话

---

## 📐 新功能架构

### 1. 情绪日记卡片（替代表格）

**当前问题**：表格形式冷冰冰，缺乏温度

**新设计**：
- 卡片式布局，每条记录是一张"情绪明信片"
- 根据心情评分显示不同的背景渐变色
  - 1-3分：深蓝紫色（低落）
  - 4-6分：橙黄色（平静）
  - 7-10分：粉橙色（愉悦）
- 显示天气图标（根据心情自动匹配）
- 显示时间标签："3天前"、"一周前的我"

### 2. 情感宣泄功能（核心新增）

#### 2.1 反思笔记
- **功能**：对每条记录添加"今天的我想说"
- **触发**：点击卡片展开详情时显示
- **特点**：
  - 可以多次添加，形成对话
  - 显示添加时间："当时的我"vs"现在的我"
  - 支持表情符号和心情贴纸

#### 2.2 给未来自己的信
- **功能**：写一封信给未来的自己
- **触发**：在低谷期记录时，系统引导"要不要给一个月后的自己写句话？"
- **特点**：
  - 设置解锁时间（7天、30天、90天）
  - 到期后系统推送提醒
  - 对比当时的自己和现在的自己

#### 2.3 情绪树洞
- **功能**：写下不想保存的话，写完就消失
- **触发**：独立入口"倾诉树洞"
- **特点**：
  - 输入框中输入，倒计时5秒后自动清空
  - 不保存到数据库，只是宣泄
  - 清空后显示鼓励语："你已经释放了它"

#### 2.4 情绪涂鸦板
- **功能**：用画笔释放情绪
- **触发**：点击"我想画画"
- **特点**：
  - 简单的手绘板
  - 可以保存为记录的附件
  - 不同心情推荐不同颜色

### 3. 正向引导元素

#### 3.1 不删除，改为"标记"
- 移除删除按钮
- 添加状态标记：
  - 🌱 正在经历
  - 🌤️ 已经好转
  - 🌈 完全度过
  - 💪 我战胜了它
- 标记后卡片样式变化（半透明+勋章图标）

#### 3.2 情绪曲线图
- **位置**：页面顶部
- **内容**：
  - 近30天心情趋势折线图
  - 标注低谷和高峰
  - 显示平均分和进步百分比
- **互动**：点击曲线上的点，定位到对应的日记

#### 3.3 成就系统
- 连续打卡徽章：7天、30天、100天
- 度过低谷徽章：连续3天心情提升
- 积极心态徽章：一周内正面记录>5条
- 自我关爱徽章：添加反思笔记10次

#### 3.4 智能鼓励语
- 根据记录内容和状态显示：
  - 低落时："你已经走过了XX天，继续加油"
  - 好转时："你比昨天的自己更好了"
  - 高峰时："记住这一刻的感觉"
  - 长期低谷："要不要和AI聊聊？"或"联系你的医生？"

### 4. 视图模式

#### 4.1 时间轴视图（默认）
- 按时间倒序排列卡片
- 显示"今天"、"昨天"、"本周"、"更早"分组
- 支持无限滚动加载

#### 4.2 心情日历
- 月历视图
- 每天显示心情表情符号
- 点击日期展开当天所有记录
- 颜色标记：红色(差)、黄色(一般)、绿色(好)

#### 4.3 标签云
- 显示所有症状类型标签
- 标签大小代表频率
- 点击标签筛选相关记录

#### 4.4 情绪对比
- "一周前的我" vs "现在的我"
- "一个月前的我" vs "现在的我"
- 显示评分变化和关键词对比

### 5. 添加记录优化

#### 5.1 快速打卡
- 顶部快速入口："今天感觉怎么样？"
- 表情选择（😢 😐 😊 😄 🥰）
- 一句话描述（可选）
- 1分钟完成打卡

#### 5.2 详细记录
- 保留原有的详细表单
- 添加新字段：
  - 触发事件（发生了什么）
  - 应对方式（我做了什么）
  - 此刻最想做的事
  - 给自己的话

#### 5.3 引导式填写
- 系统根据选择的心情提供引导问题：
  - 低落："想聊聊发生了什么吗？"
  - 平静："今天有什么值得感恩的吗？"
  - 愉悦："记录下这美好的时刻吧！"

### 6. 互动功能

#### 6.1 感恩日记板块
- 独立的"今日感恩"区域
- 每天记录3件感恩的事
- 积累后生成"感恩树"

#### 6.2 与过去对话
- 点击旧记录，弹出"对话框"
- 当时的我：显示原记录
- 现在的我：添加新的感受
- 形成时间轴对话

#### 6.3 好心情收藏夹
- 筛选出心情>7分的记录
- 单独展示为"快乐回忆"
- 低落时推荐阅读

---

## 🗄️ 数据库扩展

### 新增字段（symptom_record表）

```sql
ALTER TABLE symptom_record
ADD COLUMN reflection_notes TEXT COMMENT '反思笔记（JSON数组）',
ADD COLUMN status VARCHAR(20) DEFAULT 'ongoing' COMMENT '状态：ongoing-正在经历, better-已好转, overcome-已度过',
ADD COLUMN trigger_event VARCHAR(500) COMMENT '触发事件',
ADD COLUMN coping_method VARCHAR(500) COMMENT '应对方式',
ADD COLUMN wish TEXT COMMENT '此刻最想做的事',
ADD COLUMN self_message TEXT COMMENT '给自己的话',
ADD COLUMN mood_color VARCHAR(20) COMMENT '心情颜色',
ADD COLUMN mood_emoji VARCHAR(10) COMMENT '心情表情',
ADD COLUMN is_grateful TINYINT DEFAULT 0 COMMENT '是否感恩记录',
ADD COLUMN view_count INT DEFAULT 0 COMMENT '回看次数',
ADD COLUMN last_view_time DATETIME COMMENT '最后回看时间';
```

### 新增表

#### 1. 反思笔记表
```sql
CREATE TABLE reflection_note (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    symptom_record_id BIGINT NOT NULL COMMENT '症状记录ID',
    user_id BIGINT NOT NULL COMMENT '用户ID',
    content TEXT COMMENT '反思内容',
    note_type VARCHAR(20) COMMENT '笔记类型：reflection-反思, future_letter-给未来的信',
    unlock_date DATE COMMENT '解锁日期（时光胶囊）',
    is_unlocked TINYINT DEFAULT 1 COMMENT '是否已解锁',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_record (symptom_record_id),
    INDEX idx_user (user_id)
) COMMENT='反思笔记表';
```

#### 2. 成就徽章表
```sql
CREATE TABLE user_achievement (
    id BIGINT PRIMARY KEY AUTO_INCREMENT,
    user_id BIGINT NOT NULL COMMENT '用户ID',
    achievement_type VARCHAR(50) COMMENT '成就类型',
    achievement_name VARCHAR(100) COMMENT '成就名称',
    achievement_icon VARCHAR(100) COMMENT '徽章图标',
    description VARCHAR(200) COMMENT '成就描述',
    obtained_date DATE COMMENT '获得日期',
    create_time DATETIME DEFAULT CURRENT_TIMESTAMP,
    INDEX idx_user (user_id)
) COMMENT='用户成就表';
```

---

## 🎨 UI设计要点

### 配色方案
- **低谷心情**：#6B7FD7 → #4A5FC7（深蓝紫渐变）
- **平和心情**：#FFA500 → #FFD700（橙黄渐变）
- **愉悦心情**：#FF6B9D → #FFA07A（粉橙渐变）
- **背景**：#F5F7FA（柔和灰白）
- **强调色**：#67C23A（生命绿）、#E6A23C（温暖黄）

### 图标系统
- 心情：😢 😔 😐 🙂 😊 😄 🥰
- 状态：🌱 🌤️ 🌈 💪
- 天气：☁️ 🌧️ ⛈️ 🌤️ ☀️
- 成就：🏆 🎖️ ⭐ 💎

### 动画效果
- 卡片加载：从下方滑入 + 淡入
- 状态切换：翻转动画
- 曲线图：绘制动画
- 点赞：心跳动画

---

## 📱 响应式设计

### PC端
- 3列卡片布局
- 侧边栏显示日历和成就
- 悬浮工具栏

### 移动端
- 1列卡片布局
- 底部导航
- 手势滑动切换视图

---

## 🔧 技术实现要点

### 前端
- Vue 3 Composition API
- ECharts（情绪曲线）
- Vue-Draggable（拖动排序）
- Canvas API（涂鸦板）
- LocalStorage（草稿保存）

### 后端
- 增加状态更新接口
- 反思笔记CRUD接口
- 成就系统定时任务
- 数据统计接口（曲线数据）

---

## 🚀 实施步骤

### 第一阶段（核心功能）
1. 卡片式布局改造
2. 移除删除，添加状态标记
3. 反思笔记功能
4. 情绪曲线图

### 第二阶段（互动功能）
1. 情绪树洞
2. 给未来的信
3. 心情日历
4. 好心情收藏夹

### 第三阶段（增强体验）
1. 成就系统
2. 情绪涂鸦板
3. 感恩日记
4. 智能鼓励语

---

## 💡 心理学依据

1. **不删除设计**：基于"情绪接纳"理论，逃避只会加重痛苦
2. **反思笔记**：认知行为疗法（CBT）的核心技术
3. **给未来的信**：希望疗法，建立积极期待
4. **情绪曲线**：可视化进步，增强自我效能感
5. **成就系统**：正强化理论，建立良好习惯
6. **感恩日记**：积极心理学，提升幸福感

---

## 🎯 预期效果

- ✅ 患者每天愿意主动记录（不是被迫）
- ✅ 提供情感宣泄通道，减少压抑
- ✅ 通过对比看到自己的进步
- ✅ 正视情绪，不逃避不删除
- ✅ 形成自我疗愈的良性循环

---

## 📸 界面示意

```
┌─────────────────────────────────────────┐
│  情绪日记 · 你的心灵树洞          🌟成就  │
├─────────────────────────────────────────┤
│                                         │
│  [心情曲线图 - 近30天趋势]                │
│   📈 平均分7.2 | 比上周↑1.5 | 🏆连续7天  │
│                                         │
├─────────────────────────────────────────┤
│ 📝 今天感觉怎么样？                      │
│  [😢]  [😐]  [😊]  [😄]  [🥰]          │
│  ┌───────────────────────────┐          │
│  │ 一句话记录心情...          │          │
│  └───────────────────────────┘          │
│             [快速打卡]                    │
├─────────────────────────────────────────┤
│  [时间轴] [日历] [标签云] [对比]  [树洞]  │
├─────────────────────────────────────────┤
│  今天 · 2025年11月3日                    │
│                                         │
│  ┌───────────────────────┐              │
│  │ 🌤️  心情还不错                        │
│  │ 7/10  18:30                          │
│  │                                      │
│  │ 今天天气很好，出去散了步...            │
│  │                                      │
│  │ 💪 我战胜了它 | 👁️ 已回看3次          │
│  │                                      │
│  │ [查看详情] [添加反思] [💕收藏]         │
│  └───────────────────────┘              │
│                                         │
│  昨天 · 2025年11月2日                    │
│                                         │
│  ┌───────────────────────┐              │
│  │ 😔  有点低落                          │
│  │ 3/10  22:15                          │
│  │                                      │
│  │ 工作不顺利，感觉很累...               │
│  │                                      │
│  │ 🌱 正在经历                           │
│  │                                      │
│  │ [查看详情] [添加反思] [给未来的我]    │
│  └───────────────────────┘              │
│                                         │
└─────────────────────────────────────────┘
```

---

这是一个完整的、有温度的情绪日记系统设计。要开始实施吗？
