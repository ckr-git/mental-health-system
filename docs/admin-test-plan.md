# 管理端自动化测试计划

## 测试概述
- **测试范围**: 管理端8个功能模块
- **测试方式**: Playwright MCP + API测试
- **测试账号**: admin / Admin@123456
- **计划轮次**: 4轮对话

---

## 第1轮：认证与工作台测试

### 1.1 登录认证测试
- [ ] 管理员登录成功
- [ ] 获取用户信息
- [ ] Token验证

### 1.2 工作台Dashboard测试
- [ ] 页面加载
- [ ] 用户统计数据获取
- [ ] 用户趋势图表渲染
- [ ] 用户类型分布图
- [ ] 最近注册用户列表

---

## 第2轮：用户与医生管理测试

### 2.1 用户管理测试
- [ ] 用户列表获取(分页)
- [ ] 按角色筛选用户
- [ ] 关键词搜索用户
- [ ] 切换用户状态(启用/禁用)
- [ ] 用户统计接口

### 2.2 医生管理测试
- [ ] 医生列表获取
- [ ] 医生审核通过
- [ ] 医生审核拒绝
- [ ] 医生信息更新
- [ ] 医生工作统计

### 2.3 患者分配审核测试
- [ ] 待审核请求列表
- [ ] 审批通过操作
- [ ] 审批拒绝操作

---

## 第3轮：预约与消息管理测试

### 3.1 预约管理测试
- [ ] 预约列表获取
- [ ] 预约详情查看
- [ ] 创建新预约
- [ ] 更新预约信息
- [ ] 确认预约
- [ ] 取消预约
- [ ] 完成预约
- [ ] 删除预约
- [ ] 预约统计
- [ ] 预约趋势数据

### 3.2 消息中心测试
- [ ] 消息统计获取
- [ ] 系统通知CRUD
- [ ] 发送通知
- [ ] 用户反馈列表
- [ ] 反馈回复
- [ ] 系统警报CRUD
- [ ] 处理警报
- [ ] 公告CRUD
- [ ] 发布/下线公告
- [ ] 置顶公告

---

## 第4轮：系统设置与综合测试

### 4.1 系统设置测试
- [ ] 获取所有配置
- [ ] 获取分组配置
- [ ] 获取单个配置
- [ ] 更新配置值
- [ ] 创建新配置
- [ ] 删除配置

### 4.2 资源管理测试
- [ ] 资源列表获取(如有实现)

### 4.3 综合功能测试
- [ ] 页面导航测试
- [ ] 权限验证测试
- [ ] 错误处理测试
- [ ] 边界条件测试

---

## 测试执行记录

| 轮次 | 日期 | 通过 | 失败 | 备注 |
|------|------|------|------|------|
| 1 | 2025-12-26 | 5 | 1 | Bug#1:分页total=0 |
| 2 | 2025-12-26 | 6 | 1 | Bug#2:分页total=0 |
| 3 | 2025-12-26 | 8 | 1 | Bug#3:分页total=0 |
| 4 | 2025-12-26 | 4 | 1 | Bug#4:角色显示错误 |

---

## Bug记录

| ID | 模块 | 描述 | 严重程度 | 状态 |
|----|------|------|----------|------|
| #1 | 用户管理 | 用户列表分页total返回0 | 高 | 已修复 |
| #2 | 患者分配 | 待审核列表total返回0 | 高 | 已修复 |
| #3 | 预约管理 | 预约列表total返回0 | 高 | 已修复 |
| #4 | Dashboard | admin显示为医生角色 | 中 | 已修复 |

## 修复说明

### Bug #1/#2/#3 修复
- **问题原因**: MyBatis-Plus缺少分页插件配置
- **修复方案**: 创建`MybatisPlusConfig.java`配置分页插件
- **修复文件**: `src/main/java/com/mental/health/config/MybatisPlusConfig.java`

### Bug #4 修复
- **问题原因**: Dashboard角色显示逻辑只处理PATIENT和DOCTOR
- **修复方案**: 添加ADMIN角色的判断逻辑
- **修复文件**: `frontend/src/views/admin/Dashboard.vue`

