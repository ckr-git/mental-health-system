# 测试情绪日记功能

## 📋 测试前准备

### 1. 确保后端运行
```bash
# 检查后端是否在运行
# 访问 http://localhost:8080 应该有响应
```

### 2. 重启前端（必须！）
```bash
# 停止当前前端（如果在运行）
按 Ctrl+C

# 进入前端目录
cd frontend

# 重新启动
npm run dev
```

### 3. 清除浏览器缓存
- 按 `Ctrl + Shift + Delete`
- 清除缓存
- 或使用无痕模式（`Ctrl + Shift + N`）

---

## 🧪 测试步骤

### Step 1: 登录系统
1. 访问 http://localhost:3000
2. 账号：`patient001`
3. 密码：`123456`
4. 点击登录

### Step 2: 进入情绪日记
1. 登录成功后，查看左侧菜单
2. 找到 **☀️ 情绪日记** 菜单项
3. 点击进入

### Step 3: 体验天气系统
**应该看到：**
- ✅ 全屏天气背景（默认晴天）
- ✅ 粒子效果在飘动
- ✅ 右上角显示天气图标和名称
- ✅ 页面标题"我的情绪日记"

### Step 4: 测试灯光开关
1. 找到页面顶部中央的**灯泡图标** 💡
2. 点击灯绳
3. **应该看到：**
   - ✅ 拉绳动画
   - ✅ 背景变暗（夜晚模式）
   - ✅ 灯泡变成月亮 🌙
   - ✅ 右上角提示"关灯啦 🌙"
4. 再次点击，恢复日间模式

### Step 5: 添加日记
1. 点击 **✏️ 写今天的日记** 按钮
2. **测试心情选择：**
   - 方法1：点击表情符号（😭到🤩）
   - 方法2：拖动下方滑块（1-10分）
   - **观察背景变化：**
     - 1-2分 → 暴风雨 ⛈️（深灰）
     - 3-4分 → 细雨 🌧️（灰蓝）
     - 5-6分 → 多云 ☁️（浅灰）
     - 7-8分 → 晴天 ☀️（金粉）
     - 9-10分 → 晴空 ✨（蓝天）

3. **填写内容：**
   ```
   标题：今天心情不错
   内容：天气很好，出去散步了，感觉很放松
   精力：8星
   睡眠：7星
   压力：3星
   ```

4. 点击"保存日记"

### Step 6: 查看日记列表
**应该看到：**
- ✅ 新添加的日记卡片出现
- ✅ 卡片显示：
  - 心情表情 + 评分
  - 标题和内容摘要
  - 时间显示（今天）
  - 天气标签
- ✅ 鼠标悬停时：
  - 卡片上浮
  - 底部显示"点击查看详情"

### Step 7: 测试多条日记
1. 再添加几条不同心情的日记
2. **测试内容：**
   ```
   日记2：
   心情：4分 😕
   标题：有点低落
   内容：工作压力有点大
   
   日记3：
   心情：9分 😁
   标题：超级开心
   内容：完成了一个大项目
   ```

3. **观察：**
   - ✅ 列表显示多条日记
   - ✅ 不同心情对应不同天气
   - ✅ 时间显示正确

---

## ✅ 功能检查清单

### 天气系统
- [ ] 5种天气能正确显示
- [ ] 粒子效果流畅运行
- [ ] 背景渐变色正确
- [ ] 心情分数能触发天气变化

### 灯光开关
- [ ] 点击能切换日夜模式
- [ ] 拉绳动画流畅
- [ ] 灯泡图标切换（💡/🌙）
- [ ] 背景颜色随模式变化
- [ ] 右上角提示消息显示

### 日记卡片
- [ ] 卡片布局正确
- [ ] 心情表情和分数显示
- [ ] 标题和摘要显示
- [ ] 时间智能显示
- [ ] 天气标签显示
- [ ] hover效果正常

### 添加日记
- [ ] 对话框能正常打开
- [ ] 表情点选工作正常
- [ ] 滑块联动表情
- [ ] 表单验证正常
- [ ] 保存成功后列表刷新
- [ ] 成功提示显示

### 整体体验
- [ ] 页面加载流畅
- [ ] 动画不卡顿
- [ ] 操作响应及时
- [ ] 样式美观协调

---

## 🐛 可能遇到的问题

### 问题1：菜单中没有"情绪日记"
**原因**：前端没有重启
**解决**：停止前端（Ctrl+C），重新运行 `npm run dev`

### 问题2：点击后页面空白
**原因**：组件导入失败
**解决**：
1. 检查控制台错误
2. 确认文件路径正确
3. 清除缓存重试

### 问题3：天气背景不显示
**原因**：Canvas初始化失败
**解决**：
1. F12查看控制台错误
2. 刷新页面重试
3. 检查浏览器是否支持Canvas

### 问题4：保存日记失败
**原因**：后端未运行或401错误
**解决**：
1. 确认后端在8080端口运行
2. 检查Network标签的请求状态
3. 确认Token正确保存

### 问题5：粒子效果卡顿
**原因**：粒子数量过多
**解决**：
- 目前配置：暴风雨80个，晴天20个
- 低端设备可能卡顿（后续可优化）

---

## 📸 预期效果截图说明

### 首页效果
- 全屏天气背景
- 顶部居中灯光开关
- 右上角天气图标
- 中央白色内容区域
- 底部日记卡片网格

### 添加日记对话框
- 居中显示
- 表情选择器（10个表情）
- 滑块评分器
- 标题输入框
- 内容文本域
- 三个星级评分（精力/睡眠/压力）

### 日记卡片
- 白色圆角卡片
- 左上角大表情
- 右上角时间
- 中间标题+摘要
- 底部天气标签+统计
- hover时上浮+底部提示条

---

## 🎯 测试通过标准

**基础功能（必须）：**
- ✅ 能进入情绪日记页面
- ✅ 能看到天气背景和粒子
- ✅ 能点击灯光开关
- ✅ 能添加日记并保存
- ✅ 能看到日记列表

**体验功能（加分）：**
- ✅ 天气随心情变化流畅
- ✅ 动画效果不卡顿
- ✅ 交互反馈及时
- ✅ 样式美观统一

---

## 🚀 测试完成后

如果一切正常，恭喜你！前端核心功能已经跑通了！

**下一步工作：**
- Day 5: 开发心情留言功能
- Day 6: 开发时光信箱功能
- Day 7: 集成测试和优化

**如果遇到问题：**
- 记录错误信息
- 截图报错界面
- 告诉我具体现象
- 我会帮你调试修复

---

**Good Luck! 🎉**
