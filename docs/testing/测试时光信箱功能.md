# 测试时光信箱功能指南

## 📋 测试前准备

### 1. 确认服务运行
- ✅ 后端服务：http://localhost:8080
- ✅ 前端服务：http://localhost:3000
- ✅ 测试账号：patient001 / 123456

### 2. 清除缓存
```
按 Ctrl + Shift + Delete
或使用无痕模式 Ctrl + Shift + N
```

## 🧪 功能测试清单

### 一、访问时光信箱页面

#### 测试步骤
1. 登录系统（patient001/123456）
2. 点击左侧菜单"📮 时光信箱"
3. 进入时光信箱主页面

#### 预期结果
- ✅ 页面正常加载
- ✅ 显示天气背景
- ✅ 显示灯光开关
- ✅ 显示页面标题"📮 时光信箱"
- ✅ 显示副标题"给未来的自己寄一封信"
- ✅ 显示"✏️ 写信给未来"按钮
- ✅ 显示"🔓 可解锁信件"按钮
- ✅ 显示3个统计卡片
- ✅ 显示信件列表（或空状态）

---

### 二、写信功能测试

#### 测试2.1：打开写信对话框
**步骤**：
1. 点击"✏️ 写信给未来"按钮

**预期结果**：
- ✅ 弹出写信对话框
- ✅ 标题显示"✉️ 写给未来的自己"
- ✅ 显示"💌 选择信件类型"区域
- ✅ 显示3个信件类型卡片
- ✅ 显示"✍️ 信件内容"区域
- ✅ 显示"⏰ 何时打开这封信？"区域
- ✅ 显示温馨提示区域

#### 测试2.2：选择信件类型
**步骤**：
1. 点击"🎉 表扬信"卡片
2. 观察变化

**预期结果**：
- ✅ 卡片高亮显示（蓝色背景）
- ✅ 自动聚焦到标题输入框
- ✅ 信纸显示问候语"未来的我，你好！"
- ✅ 占位符显示对应提示文本

**步骤**：
3. 依次点击"💌 期望信"和"✉️ 感谢信"
4. 观察每个类型的变化

**预期结果**：
- ✅ 问候语和占位符随类型变化
- ✅ 卡片选中效果正常

#### 测试2.3：填写信件内容
**步骤**：
1. 选择"🎉 表扬信"
2. 标题输入："给坚持的自己"
3. 内容输入：
```
今天的我完成了一个重要的目标，虽然过程很艰辛，但我做到了！
未来的你一定要记住这份成就感。
继续加油，你可以的！
```

**预期结果**：
- ✅ 标题字数统计正常（最多50字）
- ✅ 内容字数统计正常（最多1000字）
- ✅ 信纸风格显示正常（黄色背景）
- ✅ 底部显示自动签名（当前日期）

#### 测试2.4：设置解锁时间 - 指定天数
**步骤**：
1. 选择"指定天数后"单选框
2. 在下拉框选择"7天后"

**预期结果**：
- ✅ 下拉框显示正常
- ✅ 显示解锁日期提示"将在 XXXX年XX月XX日 解锁"
- ✅ 日期计算正确（当前日期+7天）

**步骤**：
3. 依次测试其他天数选项（15/30/60/90/180/365天）

**预期结果**：
- ✅ 所有选项都能正确计算未来日期

#### 测试2.5：设置解锁时间 - 指定日期
**步骤**：
1. 选择"指定日期"单选框
2. 点击日期选择器
3. 选择未来的某个日期

**预期结果**：
- ✅ 日期选择器正常弹出
- ✅ 过去的日期被禁用（不可选）
- ✅ 今天及以后的日期可选
- ✅ 选中日期后正常显示

#### 测试2.6：设置解锁时间 - 特殊条件
**步骤**：
1. 选择"特殊条件"单选框
2. 勾选"情绪低落时（心情 < 3分）"
3. 勾选"30天后自动解锁"

**预期结果**：
- ✅ 多选框组显示正常
- ✅ 可以同时勾选多个条件
- ✅ 勾选状态正确保存

#### 测试2.7：提交信件
**步骤**：
1. 完整填写：类型+内容+解锁时间
2. 点击"📮 寄出信件"按钮

**预期结果**：
- ✅ 按钮显示加载状态
- ✅ 成功提示"📮 信件已寄出！期待未来的相遇~"
- ✅ 对话框自动关闭
- ✅ 信件列表刷新
- ✅ 新信件出现在列表中

#### 测试2.8：表单验证
**步骤**：
1. 不选择信件类型，直接点击"📮 寄出信件"

**预期结果**：
- ✅ 按钮被禁用（灰色）

**步骤**：
2. 选择类型但不填写内容，点击寄出

**预期结果**：
- ✅ 按钮被禁用

**步骤**：
3. 选择类型、填写内容，但不设置解锁时间

**预期结果**：
- ✅ 按钮被禁用（条件模式下至少勾选一个）

---

### 三、信件列表测试

#### 测试3.1：查看统计卡片
**步骤**：
1. 创建3封信件（不同类型、不同解锁时间）
2. 观察统计卡片

**预期结果**：
- ✅ "全部信件"数量正确
- ✅ "等待解锁"数量正确
- ✅ "已解锁"数量正确
- ✅ 卡片悬停效果正常

#### 测试3.2：筛选功能
**步骤**：
1. 点击"全部"标签

**预期结果**：
- ✅ 显示所有信件
- ✅ 数量匹配

**步骤**：
2. 点击"未解锁"标签

**预期结果**：
- ✅ 只显示未解锁的信件
- ✅ 已解锁信件被过滤

**步骤**：
3. 点击"已解锁"标签

**预期结果**：
- ✅ 只显示已解锁的信件
- ✅ 未解锁信件被过滤

#### 测试3.3：未解锁信件卡片
**步骤**：
1. 查看一封未解锁的信件卡片

**预期结果**：
- ✅ 显示信件类型图标和名称
- ✅ 显示"📬 寄送中"标签
- ✅ 显示锁图标 🔒
- ✅ 显示信件标题
- ✅ 显示"解锁倒计时"
- ✅ 倒计时正确显示（X天 X小时 或 X小时 X分钟）
- ✅ 显示解锁日期
- ✅ 如有特殊条件，显示条件标签
- ✅ 底部按钮显示"🕐 等待解锁中..."且被禁用
- ✅ 卡片整体为灰色主题

**步骤**：
2. 点击未解锁信件卡片

**预期结果**：
- ✅ 弹出提示"信件还未解锁，请耐心等待~"
- ✅ 不打开详情对话框

#### 测试3.4：已解锁信件卡片
**步骤**：
1. 查看一封已解锁的信件卡片
   （注：由于后端未实现，使用模拟数据测试）

**预期结果**：
- ✅ 显示信件类型图标和名称
- ✅ 显示"📭 已送达"标签（绿色）
- ✅ 显示"✨ 已解锁"徽章
- ✅ 显示信件标题
- ✅ 显示内容预览（前100字）
- ✅ 显示寄出时间
- ✅ 显示解锁时间
- ✅ 底部按钮显示"📖 查看完整信件"且可点击
- ✅ 卡片整体为绿色主题
- ✅ 边框颜色根据类型变化

#### 测试3.5：信件卡片悬停
**步骤**：
1. 鼠标悬停在信件卡片上

**预期结果**：
- ✅ 卡片向上浮动（translateY）
- ✅ 阴影加深
- ✅ 过渡动画流畅

#### 测试3.6：查看信件详情
**步骤**：
1. 点击已解锁的信件卡片

**预期结果**：
- ✅ 弹出信件详情对话框
- ✅ 标题显示信件标题
- ✅ 信封式设计（黄色背景+金色边框）
- ✅ 显示信件类型图标和名称
- ✅ 显示问候语
- ✅ 显示完整信件内容
- ✅ 显示签名（日期）
- ✅ 显示寄出时间
- ✅ 显示解锁时间
- ✅ 显示"穿越时光：X 天"
- ✅ 显示"关闭"和"💬 回复这封信"按钮

**步骤**：
2. 点击"💬 回复这封信"

**预期结果**：
- ✅ 弹出提示"回复功能将在后续版本开放"
- ✅ 对话框关闭

#### 测试3.7：空状态
**步骤**：
1. 如果没有信件（或删除所有信件）

**预期结果**：
- ✅ 显示空状态插图
- ✅ 显示文字"还没有寄出任何信件"
- ✅ 显示"📮 写第一封信"按钮
- ✅ 点击按钮打开写信对话框

---

### 四、可解锁信件测试

#### 测试4.1：可解锁信件提醒
**步骤**：
1. 观察"🔓 可解锁信件"按钮

**预期结果**：
- ✅ 如果有可解锁信件，显示红色徽章数字
- ✅ 如果没有，徽章隐藏

**步骤**：
2. 点击"🔓 可解锁信件"按钮

**预期结果**：
- ✅ 如有可解锁信件，提示"发现 X 封可解锁的信件！"
- ✅ 如无可解锁信件，提示"暂时没有可解锁的信件"

---

### 五、天气背景和灯光测试

#### 测试5.1：天气背景
**步骤**：
1. 观察页面背景

**预期结果**：
- ✅ 显示晴朗天气背景（sunny）
- ✅ 天气粒子效果正常

#### 测试5.2：灯光开关
**步骤**：
1. 点击右上角灯光开关

**预期结果**：
- ✅ 灯光模式切换（day ↔ night）
- ✅ 提示"开灯啦 💡"或"关灯啦 🌙"
- ✅ 背景颜色变化
- ✅ 开关动画流畅

---

### 六、响应式测试

#### 测试6.1：小屏幕适配
**步骤**：
1. 调整浏览器宽度至768px以下

**预期结果**：
- ✅ 信件类型卡片改为单列布局
- ✅ 解锁方式单选框改为纵向排列
- ✅ 统计卡片改为单列
- ✅ 信件网格自适应宽度
- ✅ 所有内容可正常查看和操作

---

### 七、边界情况测试

#### 测试7.1：长内容测试
**步骤**：
1. 写信时输入接近1000字的内容

**预期结果**：
- ✅ 字数统计正确
- ✅ 超过限制后无法继续输入
- ✅ 内容正常保存和显示

#### 测试7.2：特殊字符测试
**步骤**：
1. 在标题和内容中输入特殊字符：
```
表情符号：😀😁😂🤣😃😄😅😆
中英混合：Hello世界
标点符号：！@#￥%……&*（）
```

**预期结果**：
- ✅ 所有字符正常显示
- ✅ 不影响保存和查看

#### 测试7.3：网络错误模拟
**步骤**：
1. 断开网络
2. 尝试创建信件

**预期结果**：
- ✅ 显示错误提示"寄出信件失败"
- ✅ 对话框不关闭
- ✅ 内容不丢失
- ✅ 可以重新提交

---

## 🐛 已知问题

### 1. 后端API未实现
**现象**：所有信件操作都调用API，但后端未开发

**临时方案**：前端使用模拟数据展示效果

**影响**：
- ✅ UI展示正常
- ✅ 交互逻辑正常
- ❌ 数据无法持久化
- ❌ 倒计时无法真实工作

### 2. 倒计时不自动刷新
**现象**：倒计时显示固定值，不实时更新

**原因**：未实现定时器刷新机制

**影响**：需要刷新页面才能看到倒计时变化

**优化方案**：使用 `setInterval` 每分钟更新倒计时

### 3. 模拟数据有限
**现象**：只有3条模拟数据

**影响**：无法测试大量数据情况、分页功能

**优化方案**：等待后端API实现

---

## ✅ 测试通过标准

### 基础功能（必须）
- [x] 页面正常访问
- [x] 写信对话框正常打开
- [x] 3种信件类型可选择
- [x] 信件内容可填写
- [x] 3种解锁方式可设置
- [x] 表单验证正常
- [x] 信件列表正常显示
- [x] 筛选功能正常
- [x] 卡片样式正确
- [x] 天气背景和灯光正常

### 交互体验（重要）
- [x] 悬停效果流畅
- [x] 点击反馈及时
- [x] 动画过渡自然
- [x] 提示信息清晰
- [x] 操作逻辑合理

### UI设计（重要）
- [x] 信纸风格美观
- [x] 信封展示精美
- [x] 倒计时醒目
- [x] 颜色搭配和谐
- [x] 布局合理清晰

---

## 📝 测试报告模板

```
测试日期：2025-11-03
测试人员：[姓名]
测试环境：Chrome / Firefox / Edge
测试账号：patient001 / 123456

【功能测试】
✅ 写信功能：通过
✅ 列表展示：通过  
✅ 筛选功能：通过
✅ 详情查看：通过（模拟数据）
✅ 统计功能：通过

【UI测试】
✅ 信纸设计：美观
✅ 信封展示：精美
✅ 卡片样式：正确
✅ 动画效果：流畅
✅ 响应式：正常

【问题记录】
1. 后端API未实现 - 使用模拟数据
2. 倒计时不自动刷新 - 待优化
3. [其他问题...]

【建议】
1. 等待后端API开发
2. 添加倒计时自动刷新
3. [其他建议...]

【总结】
前端功能完整，UI精美，交互流畅，等待后端对接。
```

---

## 🎯 下一步

1. **等待后端开发** - 完成时光信箱API
2. **对接联调** - 前后端集成测试
3. **功能增强** - 倒计时自动刷新、推送提醒
4. **进入Day7** - 集成优化与完善

---

**测试愉快！** 🎉
